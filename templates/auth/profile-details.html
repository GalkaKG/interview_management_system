{% extends 'base/index.html' %}

{% block content %}
<div class="profile-details-container">
    <h2 class="profile-details-title">Profile Details</h2>
    <div class="profile-details">
        {% if profile %}
            {% if profile.first_name and profile.last_name %}
                <p><strong>Name:</strong> {{ profile.first_name }} {{ profile.last_name }}</p>
             {% endif %}
        <p><strong>Username:</strong> {{ request.user.username }}</p>
        <p><strong>User Type:</strong> {{ request.user.get_user_type_display }}</p>
        <p><strong>Email:</strong> {{ request.user.email }}</p>
        {% if profile.phone_number %}
        <p><strong>Phone Number:</strong> {{ profile.phone_number }}</p>
        {% endif %}
        {% if profile.department %}
        <p><strong>Department:</strong> {{ profile.department }}</p>
        {% endif %}
        {% else %}
        <p>No profile information available.</p>
        {% endif %}
    </div>
    <a class="edit-profile-button" href="{% url 'profile edit' %}">Edit Profile</a>
</div>

<!-- Notification container (add this) -->
<div id="notification-container" class="notification-container"></div>

<script>
    // WebSocket connection in JavaScript
    const webSocketProtocol = window.location.protocol === "http:" ? "ws" : "wss";
    const socket = `${webSocketProtocol}://${window.location.host}/feedback_reminder/`;

    socket.onmessage = function (event) {
        var data = JSON.parse(event.data);
        if (data.message === "Feedback is needed for the interview.") {
            showNotification(data.message);
        }
    };

    function showNotification(message) {
        var notificationContainer = document.getElementById("notification-container");
        notificationContainer.textContent = message;
        notificationContainer.style.display = "block";

        // Auto-hide the notification after a few seconds (adjust as needed)
        setTimeout(function () {
            notificationContainer.style.display = "none";
        }, 5000); // Show for 5 seconds
    }
</script>
{% endblock %}




{#{% extends 'base/index.html' %}#}
{##}
{#{% block content %}#}
{#<div class="profile-details-container">#}
{#  <h2 class="profile-details-title">Profile Details</h2>#}
{#  <div class="profile-details">#}
{#    {% if profile %}#}
{#      <p><strong>Name:</strong> {{ profile.first_name }} {{ profile.last_name }}</p>#}
{#      <p><strong>Username:</strong> {{ request.user.username }}</p>#}
{#      <p><strong>User Type:</strong> {{ request.user.get_user_type_display }}</p>#}
{#      <p><strong>Email:</strong> {{ request.user.email }}</p>#}
{#      {% if profile.phone_number %}#}
{#        <p><strong>Phone Number:</strong> {{ profile.phone_number }}</p>#}
{#      {% endif %}#}
{#      {% if profile.department %}#}
{#        <p><strong>Department:</strong> {{ profile.department }}</p>#}
{#      {% endif %}#}
{#    {% else %}#}
{#      <p>No profile information available.</p>#}
{#    {% endif %}#}
{#  </div>#}
{#  <a class="edit-profile-button" href="{% url 'profile edit' %}">Edit Profile</a>#}
{#</div>#}
{#    <script>#}
{#        // WebSocket connection in JavaScript#}
{#        const webSocketProtocol = window.location.protocol ==="http:" ? "wss" : "ws";#}
{#        const socket = `${webSocketProtocol}//:${window.location.host}/feedback_reminder/`;#}
         {#var socket = new WebSocket("ws:///127.0.0.1:8000/ws/feedback_reminder/");#}
{##}
{#socket.onmessage = function(event) {#}
{#    var data = JSON.parse(event.data);#}
{#    if (data.message === "Feedback is needed for the interview.") {#}
{#        showNotification(data.message);#}
{#    }#}
{#};#}
{##}
{#function showNotification(message) {#}
{#    var notificationContainer = document.getElementById("notification-container");#}
{#    notificationContainer.textContent = message;#}
{#    notificationContainer.style.display = "block";#}
{##}
{#    // Auto-hide the notification after a few seconds (adjust as needed)#}
{#    setTimeout(function() {#}
{#        notificationContainer.style.display = "none";#}
{#    }, 5000); // Show for 5 seconds#}
{#}#}
{##}
{#    </script>#}
{#{% endblock %}#}
{##}
{##}
